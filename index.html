<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>KIDIQ | English Learning</title>
<style>
  :root {
    --primary: #19a974;
    --accent: #ffb41e;
    --night-bg: #0a0a30;
    --day-bg: #87ceeb;
  }
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    transition: background 1s;
    background: var(--day-bg);
    color: #333;
  }
  .container {
    max-width: 700px;
    margin: auto;
    padding: 1rem;
  }
  h1,h2,h3 { text-align: center; }
  .card {
    background: rgba(255,255,255,0.9);
    padding: 1rem;
    margin: 1rem 0;
    border-radius: 12px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  }
  button {
    cursor: pointer;
    padding: 0.5rem 1rem;
    border:none;
    border-radius:8px;
    background: var(--primary);
    color:white;
    margin:0.3rem;
    font-weight:600;
  }
  #xpBarContainer{
    background:#ddd;
    border-radius:12px;
    overflow:hidden;
    height:20px;
    margin:0.5rem 0;
  }
  #xpBar{
    height:100%;
    width:0;
    background: var(--accent);
    transition: width 0.5s;
  }
  #starRating span{
    font-size:1.5rem;
    cursor:pointer;
    color: #ccc;
    margin:0 0.1rem;
  }
  #starRating span.filled { color: gold; }
  .feedback-success, .rating-success { display:none; color: green; font-weight:bold; margin-top:0.5rem; text-align:center; }
  .disabled { opacity:0.5; pointer-events:none; }
</style>
</head>
<body>
<div class="container">

  <h1>üëã Welcome to KIDIQ</h1>

  <!-- Profile & Level -->
  <div class="card">
    <h2>Your Profile</h2>
    <p id="userName">Name: Guest</p>
    <p id="userLevel">Total XP: 0</p>
    <div id="xpBarContainer"><div id="xpBar"></div></div>
  </div>

  <!-- Daily Quote -->
  <div class="card" id="dailyQuoteCard">
    <h2>üí° Thought for Today</h2>
    <p id="dailyQuote"></p>
  </div>

  <!-- Mini Quiz -->
  <div class="card" id="quizCard">
    <h2>üìù Mini Quiz</h2>
    <p id="quizQ"></p>
    <div id="quizOpts"></div>
    <p id="quizResult" style="font-weight:bold;"></p>
  </div>

  <!-- Flashcard -->
  <div class="card" id="flashcardCard">
    <h2>üìö Flashcard</h2>
    <p id="flashQuestion"></p>
    <p id="flashAnswer" style="font-weight:bold;"></p>
    <button id="nextFlashcard">Next Flashcard</button>
  </div>

  <!-- Feedback Form -->
  <div class="card">
    <h2>‚úâÔ∏è Send Feedback</h2>
    <form id="feedbackForm">
      <input type="text" id="fbName" placeholder="Name" required><br><br>
      <input type="text" id="fbSurname" placeholder="Surname" required><br><br>
      <input type="email" id="fbEmail" placeholder="Email"><br><br>
      <textarea id="fbMessage" placeholder="Message" required></textarea><br><br>
      <button type="submit">Send Feedback</button>
    </form>
    <p class="feedback-success" id="feedbackSuccess">Thanks! Your feedback has been recorded ‚úÖ</p>
  </div>

  <!-- Rating -->
  <div class="card">
    <h2>‚≠ê Rate Our Bot</h2>
    <div id="starRating">
      <span data-star="1">‚òÖ</span>
      <span data-star="2">‚òÖ</span>
      <span data-star="3">‚òÖ</span>
      <span data-star="4">‚òÖ</span>
      <span data-star="5">‚òÖ</span>
    </div>
    <button id="confirmRating">Confirm Rating</button>
    <p class="rating-success" id="ratingSuccess"></p>
  </div>

</div>

<script>
  // 1. DAY/NIGHT BACKGROUND
  function updateBackground(){
    const hour = new Date().getHours();
    document.body.style.background = (hour>=6 && hour<19) ? "var(--day-bg)" : "var(--night-bg)";
  }
  updateBackground();
  setInterval(updateBackground, 60000);

  // 2. DAILY QUOTE
  const quotes = ["The best way to learn is by doing.","Mistakes are proof you're trying.","Stay curious!","Knowledge is power.","Practice makes perfect."];
  document.getElementById('dailyQuote').textContent = quotes[Math.floor(Math.random()*quotes.length)];

  // 3. MINI QUIZ
  const quizData = [
    {q: "What is the synonym of 'Happy'?", opts:["Sad","Joyful","Angry"], ans:1},
    {q: "Which is a fruit?", opts:["Carrot","Apple","Broccoli"], ans:1},
    {q: "What color is the sky?", opts:["Blue","Green","Red"], ans:0},
    {q: "How many legs does a spider have?", opts:["6","8","10"], ans:1},
    {q: "Water freezes at 0 on which scale?", opts:["Fahrenheit","Celsius","Kelvin"], ans:1}
  ];
  let currentQuestionIndex=0, score=0, totalXP=parseInt(localStorage.getItem('totalXP'))||0;
  function showQuestion(index){
    const quizQ=document.getElementById("quizQ");
    const quizOpts=document.getElementById("quizOpts");
    const quizResult=document.getElementById("quizResult");
    quizResult.textContent="";
    if(index<quizData.length){
      quizQ.textContent=quizData[index].q;
      quizOpts.innerHTML="";
      quizData[index].opts.forEach((o,i)=>{
        const btn=document.createElement('button');
        btn.textContent=o;
        btn.onclick=()=>handleAnswer(i);
        quizOpts.appendChild(btn);
      });
    }
  }
  function handleAnswer(selection){
    const correctIndex=quizData[currentQuestionIndex].ans;
    const quizResult=document.getElementById("quizResult");
    if(selection===correctIndex){
      quizResult.textContent="‚úÖ Correct!";
      score++;
      totalXP+=2;
      showXPNotification('+2 XP! Correct Answer üéâ');
    } else quizResult.textContent="‚ùå Try again.";
    localStorage.setItem('totalXP', totalXP);
    updateXP(totalXP);
    updateLevel(totalXP);
    setTimeout(()=>{
      currentQuestionIndex++;
      if(currentQuestionIndex<quizData.length) showQuestion(currentQuestionIndex);
      else quizComplete();
    },1200);
  }
  function quizComplete(){
    const quizQ=document.getElementById("quizQ");
    const quizOpts=document.getElementById("quizOpts");
    const quizResult=document.getElementById("quizResult");
    quizQ.textContent="üéâ Quiz Completed For Today!";
    quizOpts.innerHTML="";
    quizResult.textContent=`Your final score: ${score}/${quizData.length}`;
  }
  function updateXP(points){document.getElementById("xpBar").style.width=Math.min(100,points%100)+'%';}
  function updateLevel(points){document.getElementById("userLevel").textContent=`Total XP: ${points}`;}
  showQuestion(currentQuestionIndex);
  updateXP(totalXP);
  updateLevel(totalXP);

  // 4. FLASHCARDS
  const flashcards=[{q:"Hello","a":"Bonjour"},{q:"Thank you","a":"Merci"},{q:"Goodbye","a":"Au revoir"}];
  let flashIndex=0;
  const flashQ=document.getElementById("flashQuestion");
  const flashA=document.getElementById("flashAnswer");
  function showFlashcard(i){ flashQ.textContent=flashcards[i].q; flashA.textContent=flashcards[i].a; }
  document.getElementById("nextFlashcard").onclick=()=>{
    flashIndex=(flashIndex+1)%flashcards.length; showFlashcard(flashIndex); totalXP++; updateXP(totalXP); updateLevel(totalXP); showXPNotification('+1 XP! Flashcard Viewed ‚ú®'); localStorage.setItem('totalXP', totalXP);
  }
  showFlashcard(flashIndex);

  // 5. FEEDBACK
  const feedbackForm=document.getElementById('feedbackForm');
  const feedbackSuccess=document.getElementById('feedbackSuccess');
  feedbackForm.onsubmit=(e)=>{
    e.preventDefault();
    const name=document.getElementById('fbName').value;
    const surname=document.getElementById('fbSurname').value;
    const email=document.getElementById('fbEmail').value;
    const message=document.getElementById('fbMessage').value;
    if(!message.trim()) return alert("Message cannot be empty!");
    let feedbacks=JSON.parse(localStorage.getItem('feedbacks')||'[]');
    feedbacks.push({name,surname,email,message,date:new Date().toISOString()});
    localStorage.setItem('feedbacks',JSON.stringify(feedbacks));
    feedbackForm.reset();
    feedbackSuccess.style.display="block";
    setTimeout(()=>feedbackSuccess.style.display="none",4000);
    totalXP+=3; updateXP(totalXP); updateLevel(totalXP); showXPNotification('+3 XP! Feedback Sent ‚ú®'); localStorage.setItem('totalXP', totalXP);
  }

  // 6. RATING
  const ratingStars=document.querySelectorAll('#starRating span'); let selectedRating=0;
  ratingStars.forEach(star=>{ star.onclick=()=>{ selectedRating=parseInt(star.dataset.star); updateStars(selectedRating); }; star.onmouseover=()=>updateStars(parseInt(star.dataset.star)); star.onmouseout=()=>updateStars(selectedRating); });
  function updateStars(rating){ ratingStars.forEach(s=>s.classList.remove('filled')); ratingStars.forEach(s=>{ if(parseInt(s.dataset.star)<=rating) s.classList.add('filled'); }); }
  document.getElementById('confirmRating').onclick=()=>{
    if(selectedRating===0) return alert("Please select a rating first!");
    localStorage.setItem('botRating',selectedRating);
    const ratingSuccess=document.getElementById('ratingSuccess');
    ratingSuccess.textContent=`Thanks! You rated the bot ${selectedRating}/5 ‚≠ê`;
    ratingSuccess.style.display="block";
    setTimeout(()=>ratingSuccess.style.display="none",4000);
    totalXP+=2; updateXP(totalXP); updateLevel(totalXP); showXPNotification('+2 XP! Thanks for Rating ‚ú®'); localStorage.setItem('totalXP', totalXP);
  }

  // 7. XP NOTIFICATION
  function addSparkle(notif){
    const sparkleCount=10;
    for(let i=0;i<sparkleCount;i++){
      const sparkle=document.createElement('div');
      sparkle.style.position='absolute'; sparkle.style.width=sparkle.style.height=(Math.random()*6+4)+'px'; sparkle.style.background='#fff';
      sparkle.style.borderRadius='50%'; sparkle.style.left=Math.random()*notif.offsetWidth+'px';
      sparkle.style.top=Math.random()*notif.offsetHeight+'px'; sparkle.style.opacity=Math.random();
      sparkle.style.pointerEvents='none'; sparkle.style.transform=`scale(${Math.random()})`; sparkle.style.filter='blur(1px)';
      notif.appendChild(sparkle);
      sparkle.animate([{transform:'translateY(0) scale(0.5)',opacity:1},{transform:`translateY(-${Math.random()*20+10}px) scale(1)`,opacity:0}],{duration:800+Math.random()*400,iterations:1});
      setTimeout(()=>{if(notif.contains(sparkle)) notif.removeChild(sparkle);},1200);
    }
  }
  function showXPNotification(message){
    const notif=document.createElement('div');
    notif.textContent=message;
    notif.style.position='fixed'; notif.style.bottom='120px'; notif.style.left='50%'; notif.style.transform='translateX(-50%)';
    notif.style.background='var(--primary)'; notif.style.color='#fff'; notif.style.padding='0.5rem 1rem';
    notif.style.borderRadius='24px'; notif.style.fontWeight='600'; notif.style.zIndex=9999; notif.style.opacity=1; notif.style.transition='all 2s ease-out'; notif.style.textAlign='center'; notif.style.position='relative';
    document.body.appendChild(notif); addSparkle(notif);
    setTimeout(()=>{notif.style.bottom='180px'; notif.style.opacity=0;},50);
    setTimeout(()=>{document.body.removeChild(notif);},2050);
  }

</script>
</body>
      </html>
